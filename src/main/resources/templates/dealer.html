<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/header :: head('Portal de Coches - Concesionarios')}"></head>

<body>
    <nav th:replace="~{fragments/header :: navbar}"></nav>
    <div class="preloader">
        <div class="loader-ripple"><div></div><div></div></div>
    </div>

    <main class="main">
        <div class="site-breadcrumb" style="background: url(/img/breadcrumb/01.jpg)">
            <div class="container">
                <h2 class="breadcrumb-title">Concesionarios</h2>
                <ul class="breadcrumb-menu">
                    <li><a th:href="@{/}">Inicio</a></li>
                    <li class="active">Concesionarios</li>
                </ul>
            </div>
        </div>

        <div class="car-area bg py-120">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="col-md-12 mb-4">
                            <h6>Mostrando <span th:text="${#lists.size(dealers)}">0</span> concesionarios</h6>
                        </div>
                        
                        <!-- Empty State -->
                        <div th:if="${dealers == null or dealers.isEmpty()}" class="col-12">
                            <div class="alert alert-info text-center">
                                <i class="far fa-store" style="font-size: 3rem;"></i>
                                <h4 class="mt-3">No hay concesionarios disponibles</h4>
                                <p>Por favor, vuelva m√°s tarde.</p>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div th:each="dealer : ${dealers}" class="col-md-6 col-lg-4">
                                <div class="dealer-item">
                                    <div class="dealer-img">
                                        <span class="dealer-listing" th:text="${dealer.cars != null ? dealer.cars.size() : 0} + ' Listados'">0 Listing</span>
                                        <img th:if="${dealer.logoUrl != null and !dealer.logoUrl.isEmpty()}" 
                                             th:src="@{'/uploads/' + ${dealer.logoUrl}}" 
                                             alt="Dealer logo">
                                        <img th:unless="${dealer.logoUrl != null and !dealer.logoUrl.isEmpty()}" 
                                             th:src="@{/img/dealer/01.png}" 
                                             alt="Default logo">
                                    </div>
                                    <div class="dealer-content">
                                        <h4>
                                            <a th:href="@{/dealers/{id}(id=${dealer.id})}" th:text="${dealer.name}">Dealer Name</a>
                                        </h4>
                                        <ul>
                                            <li th:if="${dealer.city != null}">
                                                <i class="far fa-location-dot"></i> 
                                                <span th:text="${dealer.address != null ? dealer.address + ', ' : ''} + ${dealer.city}">Location</span>
                                            </li>
                                            <li th:if="${dealer.phone != null}">
                                                <i class="far fa-phone"></i> 
                                                <a th:href="'tel:' + ${dealer.phone}" th:text="${dealer.phone}">Phone</a>
                                            </li>
                                            <li th:if="${dealer.email != null}">
                                                <i class="far fa-envelope"></i> 
                                                <a th:href="'mailto:' + ${dealer.email}" th:text="${dealer.email}">Email</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer th:replace="~{fragments/footer :: footer}"></footer>

    <div th:replace="~{fragments/footer :: scroll-top}"></div>

    <div th:replace="~{fragments/header :: scripts}"></div>
</body>
</html>